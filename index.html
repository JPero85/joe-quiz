<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Find Your Next Book</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@700&family=Lato:wght@400;700&display=swap');

  :root{
    --ink:#0b1f3a;
    --muted:#475569;
    --panel:#f8f9fa;
    --navy:#0b1f3a;
    --navy-dk:#061126;
    --ring:#e2e8f0;
  }

  body {
    font-family: 'Lato', sans-serif;
    background: var(--panel);
    margin: 0;
    padding: 24px 16px 40px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  h2 {
    font-family: 'Open Sans', sans-serif;
    text-align: center;
    font-size: 2rem;
    margin: 0 0 .5rem 0;
    color: var(--ink);
  }

  p.intro {
    max-width: 900px;
    text-align: center;
    font-size: 1.1rem;
    margin: 0 auto 1.5rem auto;
    line-height: 1.55;
    color: var(--muted);
  }

  form {
    background: #fff;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    max-width: 900px;
    width: 100%;
    font-size: 1.08rem;
    border: 1px solid var(--ring);
  }

  .quiz-question {
    margin-bottom: 1.25rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--ring);
  }
  .quiz-question:last-child{ border-bottom:0; }

  .quiz-question p {
    font-weight: 700;
    margin: 0 0 .6rem 0;
    color: var(--ink);
  }

  label {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    margin-right: 22px;
    margin-bottom: .25rem;
    cursor: pointer;
  }

  button {
    background: var(--navy);
    color: #fff;
    border: none;
    padding: .9rem 1.4rem;
    font-size: 1.08rem;
    font-weight: 700;
    border-radius: 10px;
    cursor: pointer;
    transition: background .2s ease, transform .18s ease;
    box-shadow: 0 6px 18px rgba(11,31,58,.18);
  }
  button:hover { background: var(--navy-dk); transform: translateY(-1px); }
  button:active { transform: translateY(0); }

  /* Results */
  #results{ display:none; width:100%; max-width:900px; }
  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 18px;
    margin-top: 1.25rem;
  }

  .result-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    background: #fff;
    border-radius: 12px;
    padding: 1rem;
    box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    border: 1px solid var(--ring);
  }

  .card-title {
    font-family: 'Open Sans', sans-serif;
    margin: .2rem 0 .6rem;
    font-size: 1.25rem;
    font-weight: 800;
    color: var(--ink);
  }

  .cover {
    width: 100%;
    max-width: 280px;
    height: auto;                 /* stays top-aligned visually */
    border-radius: 12px;
    border: 1px solid var(--ring);
    background: #f1f5f9;
    margin-bottom: .75rem;
    align-self: flex-start;       /* keeps the image top-aligned in card */
  }

  .buy-btn {
    display: inline-block;
    margin-top: 12px;
    padding: .8rem 1.2rem;
    font-weight: 700;
    background: var(--navy); /* navy blue */
    color: #fff;
    border-radius: 10px;
    text-decoration: none;
    box-shadow: 0 6px 16px rgba(11, 31, 58, .22);
    transition: background .2s ease, transform .18s ease;
  }
  .buy-btn:hover { background: var(--navy-dk); transform: translateY(-1px); }
  .buy-btn:active { transform: translateY(0); }

  .note { margin-top:.5rem; font-size:.92rem; color:var(--muted); text-align:center; }
</style>
</head>
<body>

<h2>Find Your Next Book</h2>
<p class="intro">
  Answer the following 12 questions to discover which of Joe’s books will help you most right now.
  Each question pinpoints a challenge you might be facing, and your top two results will be recommended
  based on your answers. Select “Yes” or “No” for each statement, then click below to see your recommendations.
</p>

<form id="quiz-form">
  <!--
    HOW TO MAP:
    - Standard weighted mapping: set data-primary / data-secondary / data-tertiary (4/2/1 points on “Yes”).
    - “Full score to both categories” mapping: add data-full="ps" to give 4 pts to BOTH primary & secondary.
  -->

  <!-- Q1 (example, as you had it) -->
  <div class="quiz-question"
       data-primary="Clarity Collapse"
       data-secondary="Contextual Amnesia"
       data-tertiary="Avoidance Architecture">
    <p>1. I often sit down to work and can’t tell what actually matters.</p>
    <label><input type="radio" name="question-1" value="yes"> Yes</label>
    <label><input type="radio" name="question-1" value="no"> No</label>
  </div>

  <!-- TODO: Add your remaining 11 questions here, copying the block above.
       Example of “full to both”:
       <div class="quiz-question"
            data-primary="Systemic Overload"
            data-secondary="Friction-First Execution"
            data-full="ps">
         <p>Q#. When everything is urgent, nothing actually moves.</p>
         <label><input type="radio" name="question-#" value="yes"> Yes</label>
         <label><input type="radio" name="question-#" value="no"> No</label>
       </div>
  -->

  <button type="submit">See My Book Recommendations</button>
</form>

<div id="results">
  <div class="grid">
    <div class="result-card">
      <img id="primary-book-image" class="cover" src="" alt="">
      <div id="primary-book-title" class="card-title"></div>
      <a id="primary-book-link" class="buy-btn" href="#" target="_blank">Buy Here</a>
    </div>
    <div class="result-card">
      <img id="secondary-book-image" class="cover" src="" alt="">
      <div id="secondary-book-title" class="card-title"></div>
      <a id="secondary-book-link" class="buy-btn" href="#" target="_blank">Buy Here</a>
    </div>
  </div>
  <p class="note" id="score-note"></p>
</div>

<script>
  /* ---- BOOK LOOKUP TABLES (10 published titles) ----
     Make sure the keys in categoryToBook cover every category you use in questions.
     Replace image URLs and buy links with your real paths. */

  const categoryToBook = {
    "Clarity Collapse": "Fix the Flow",
    "Systemic Overload": "The Cost You Didn't Count",
    "Role Drift": "Polished Outside Broken Inside",
    "Avoidance Architecture": "Start With What Hurts",
    "Friction-First Execution": "Start Hard Coast Later",
    "Rebuild Resistance": "Finish It Right",
    "Delegation Breakdown": "How to Think with AI So You Don't Stop Thinking At All",
    "Verification Bypass": "What Automation Erases",
    "Feedback Blindness": "Start Smaller Stay Standing",
    "Contextual Amnesia": "The Cost of Rushing"
  };

  const canonicalCategoryOrder = Object.keys(categoryToBook); // tie-breaker order

  const bookImages = {
    "Fix the Flow": "URL1",
    "The Cost You Didn't Count": "URL2",
    "Polished Outside Broken Inside": "URL3",
    "Start With What Hurts": "URL4",
    "Start Hard Coast Later": "URL5",
    "Finish It Right": "URL6",
    "How to Think with AI So You Don't Stop Thinking At All": "URL7",
    "What Automation Erases": "URL8",
    "Start Smaller Stay Standing": "URL9",
    "The Cost of Rushing": "URL10"
  };

  const bookLinks = {
    "Fix the Flow": "#",
    "The Cost You Didn't Count": "#",
    "Polished Outside Broken Inside": "#",
    "Start With What Hurts": "#",
    "Start Hard Coast Later": "#",
    "Finish It Right": "#",
    "How to Think with AI So You Don't Stop Thinking At All": "#",
    "What Automation Erases": "#",
    "Start Smaller Stay Standing": "#",
    "The Cost of Rushing": "#"
  };

  function pickTopTwo(scores){
    // Ensure every known category exists (so we can always pick two)
    canonicalCategoryOrder.forEach(cat => { if(!(cat in scores)) scores[cat] = 0; });

    // Sort by score desc, then by canonical order to break ties deterministically
    const ranked = Object.keys(scores).sort((a,b) => {
      if (scores[b] !== scores[a]) return scores[b] - scores[a];
      return canonicalCategoryOrder.indexOf(a) - canonicalCategoryOrder.indexOf(b);
    });

    const primaryCat = ranked[0];
    const secondaryCat = ranked.find(c => c !== primaryCat) || ranked[1];

    return [primaryCat, secondaryCat];
  }

  function applyScoring(scores, q){
    const yes = q.querySelector("input[type='radio']:checked")?.value === "yes";
    if(!yes) return;

    const p = q.dataset.primary;
    const s = q.dataset.secondary;
    const t = q.dataset.tertiary;

    if(q.dataset.full === "ps"){
      // Full score to BOTH primary & secondary
      scores[p] = (scores[p] || 0) + 4;
      scores[s] = (scores[s] || 0) + 4;
    } else {
      // Standard weighted 4/2/1
      if(p) scores[p] = (scores[p] || 0) + 4;
      if(s) scores[s] = (scores[s] || 0) + 2;
      if(t) scores[t] = (scores[t] || 0) + 1;
    }
  }

  document.getElementById("quiz-form").addEventListener("submit", function(e) {
    e.preventDefault();

    const scores = {};
    document.querySelectorAll(".quiz-question").forEach(q => applyScoring(scores, q));

    const [primaryCat, secondaryCat] = pickTopTwo(scores);

    const primaryBook = categoryToBook[primaryCat];
    const secondaryBook = categoryToBook[secondaryCat];

    // Fallback safety: if a category isn’t mapped, skip gracefully
    function safe(val, fallback){ return val ?? fallback; }

    document.getElementById("primary-book-image").src = safe(bookImages[primaryBook], "");
    document.getElementById("primary-book-title").textContent = safe(primaryBook, "—");
    document.getElementById("primary-book-link").href = safe(bookLinks[primaryBook], "#");

    document.getElementById("secondary-book-image").src = safe(bookImages[secondaryBook], "");
    document.getElementById("secondary-book-title").textContent = safe(secondaryBook, "—");
    document.getElementById("secondary-book-link").href = safe(bookLinks[secondaryBook], "#");

    const note = [];
    if(Object.values(scores).every(v => v === 0)){
      note.push("No questions were answered “Yes”, so we recommended two solid starting points.");
    }
    if(document.querySelectorAll("[data-full='ps']").length){
      note.push("Some questions award full points to two categories when strongly linked.");
    }
    document.getElementById("score-note").textContent = note.join(" ");

    document.getElementById("results").style.display = "block";
    window.scrollTo({ top: document.getElementById("results").offsetTop, behavior: 'smooth' });
  });
</script>

</body>
</html>
