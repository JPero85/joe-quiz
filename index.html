<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Find Your Next Book</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Open+Sans:wght@600;800&display=swap" rel="stylesheet">

<style>
  :root{
    --ink:#0f172a;
    --muted:#475569;
    --panel:#f8fafc;
    --navy:#0b1f3a;
    --navy-dk:#061126;
    --ring:#e2e8f0;
    --card:#ffffff;
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0}
  body{
    font-family:Lato,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    color:var(--ink); background:var(--panel); line-height:1.7; font-size:1.06rem;
  }
  .wrap{max-width:960px;margin:0 auto;padding:22px 16px}
  h1,h2,h3{font-family:"Open Sans",sans-serif;font-weight:800;letter-spacing:-.015em;margin:0;color:var(--ink)}
  .title{font-size:clamp(28px,3.6vw,38px); text-align:center; margin-bottom:.6rem}
  .subtitle{color:var(--ink); text-align:center; margin:.2rem 0}
  .bullet-list{display:inline-block; text-align:left; margin:.5rem 0 0; padding-left:1.2rem}
  .intro{
    background:#efefef; border-radius:12px; padding:22px 18px; margin-bottom:18px;
    border:1px solid #e5e7eb;
  }

  .card{
    background:var(--card); border:1px solid var(--ring); border-radius:16px; padding:16px;
    box-shadow:0 1px 2px rgba(15,23,42,.06); max-width:840px; margin:0 auto; text-align:center;
  }

  /* Questions (inserted by JS) */
  .quiz-question{padding:14px;border:1px solid var(--ring);border-radius:12px;margin:.85rem 0;background:#fff}
  .q{margin:0 0 .6rem;font-weight:700;font-family:"Open Sans",sans-serif}
  .choices{display:inline-flex;gap:1.2rem;flex-wrap:wrap;justify-content:center}
  .choices label{display:inline-flex;align-items:center;gap:.5rem;font-size:1.02rem}

  .actions{display:flex;justify-content:center;gap:12px;align-items:center;margin-top:1rem;flex-wrap:wrap}
  .btn{
    appearance:none;border:0;cursor:pointer;padding:.9rem 1.25rem;border-radius:12px;
    font-weight:700;font-family:"Open Sans",sans-serif;background:var(--navy);color:#fff;font-size:1.04rem;
    box-shadow:0 6px 18px rgba(11,31,58,.22);transition:transform .02s,box-shadow .15s,background .2s
  }
  .btn:hover{background:var(--navy-dk);transform:translateY(-1px)}
  .btn:active{transform:translateY(1px)}
  .error{display:none;color:#b91c1c;font-weight:700}

  /* Results */
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin-top:1.5rem;width:100%;justify-items:center}
  .result-card{
    display:flex;flex-direction:column;align-items:center;justify-content:flex-start;text-align:center;width:100%;max-width:520px
  }
  .card-title{margin:.4rem 0 .6rem;font-size:1.22rem;font-family:"Open Sans",sans-serif}
  .cover{
    width:100%;max-width:280px;height:auto;border-radius:12px;border:1px solid var(--ring);background:#f1f5f9;margin-bottom:.75rem
  }
  .buy-btn{
    display:inline-block;margin-top:10px;padding:.85rem 1.15rem;font-weight:800;background:var(--navy);color:#fff;border-radius:10px;
    text-decoration:none;font-size:1.02rem;font-family:"Open Sans",sans-serif;box-shadow:0 4px 12px rgba(11,31,58,.25);transition:background .2s,transform .2s
  }
  .buy-btn:hover{background:var(--navy-dk);transform:translateY(-1px)}
  .buy-btn:active{transform:translateY(1px)}

  /* Fade-in for results */
  @keyframes fadeUp { from {opacity:0; transform:translateY(8px);} to {opacity:1; transform:translateY(0);} }
  .fade-in{ animation: fadeUp .36s ease-out both; }

  /* Mobile breathing room */
  @media (max-width:520px){
    .intro{padding:18px 14px}
    .btn{width:100%}
  }
</style>
</head>
<body>
  <main class="wrap">
    <!-- Intro -->
    <section class="intro">
      <h2 class="title">üß≠ Start Here!</h2>
      <p class="subtitle">This quiz is designed to help surface where friction is showing up in your system, even if it's not obvious yet.</p>
      <p class="subtitle">For each statement below, choose the answer that best reflects your current experience. There are no wrong answers‚Äîjust honest signals.</p>
      <ul class="bullet-list">
        <li>üëç <strong>‚ÄúYes, this is true for me‚Äù</strong> means the statement resonates or regularly shows up in your work.</li>
        <li>üëé <strong>‚ÄúNo, this doesn‚Äôt reflect my experience‚Äù</strong> means it‚Äôs not something you currently deal with.</li>
      </ul>
      <p class="subtitle">You‚Äôll get a tailored recommendation based on your unique pattern of friction.</p>
    </section>

    <!-- QUIZ -->
    <form id="quiz-form" class="card" novalidate>
      <div id="questions"><!-- JS injects 12 questions here --></div>
      <div class="actions">
        <button type="submit" class="btn">See My Book Recommendations</button>
        <div class="error" id="error-msg" role="alert">Please answer all 12 questions.</div>
      </div>
    </form>

    <!-- RESULTS -->
    <section id="results" class="grid" style="display:none;">
      <article class="card result-card fade-in">
        <h3 class="card-title" id="primary-book-title"></h3>
        <img id="primary-book-image" alt="" class="cover">
        <a id="primary-buy-btn" href="#" target="_blank" rel="noopener" class="buy-btn">Buy Here</a>
      </article>
      <article class="card result-card fade-in">
        <h3 class="card-title" id="secondary-book-title"></h3>
        <img id="secondary-book-image" alt="" class="cover">
        <a id="secondary-buy-btn" href="#" target="_blank" rel="noopener" class="buy-btn">Buy Here</a>
      </article>
      <div class="actions" style="grid-column:1/-1;">
        <button id="retake" class="btn" type="button">Retake Quiz</button>
      </div>
    </section>
  </main>

<script>
/* ---------------------------
   Questions (12) ‚Äî data-driven
----------------------------*/
const QUESTIONS = [
  { q: "1) I often sit down to work and can‚Äôt tell what actually matters.",
    p:"Clarity Collapse", s:"Contextual Amnesia", t:"Avoidance Architecture" },
  { q: "2) I move through tasks all day but rarely feel real progress.",
    p:"Systemic Overload", s:"Avoidance Architecture", t:"Clarity Collapse" },
  { q: "3) I get my work done, but it feels misaligned with who I am or what I value.",
    p:"Role Drift", s:"Delegation Breakdown", t:"Clarity Collapse" },
  { q: "4) I procrastinate on high-value tasks, even when they matter deeply to me.",
    p:"Avoidance Architecture", s:"Friction-First Execution", t:"Rebuild Resistance" },
  { q: "5) I delay important work until the last minute, then sprint and burn out.",
    p:"Friction-First Execution", s:"Rebuild Resistance", t:"Systemic Overload" },
  { q: "6) I‚Äôve tried rebuilding my systems before ‚Äî they never seem to stick.",
    p:"Rebuild Resistance", s:"Avoidance Architecture", t:"Friction-First Execution" },
  { q: "7) I avoid delegating because I‚Äôm unsure others will meet the mark.",
    p:"Delegation Breakdown", s:"Verification Bypass", t:"Feedback Blindness" },
  { q: "8) I often feel unsure whether an outcome is still aligned with intent.",
    p:"Verification Bypass", s:"Clarity Collapse", t:"Contextual Amnesia" },
  { q: "9) My team/system moves smoothly but I rarely hear disagreement.",
    p:"Feedback Blindness", s:"Delegation Breakdown", t:"Verification Bypass" },
  { q: "10) I can‚Äôt remember why some decisions were made ‚Äî we just keep moving.",
    p:"Contextual Amnesia", s:"Clarity Collapse", t:"Rebuild Resistance" },
  { q: "11) I often wonder if I can still trust the outputs our systems rely on.",
    p:"Rebuild Resistance", s:"Verification Bypass", t:"Delegation Breakdown" },
  { q: "12) Things are moving fast ‚Äî but I‚Äôm not sure they‚Äôre moving in the right direction.",
    p:"Systemic Overload", s:"Rebuild Resistance", t:"Clarity Collapse" }
];

/* Category -> Book (10 published) */
const CATEGORY_TO_BOOK = {
  "Clarity Collapse": "Fix the Flow",
  "Systemic Overload": "The Cost You Didn't Count",
  "Role Drift": "Polished Outside Broken Inside",
  "Avoidance Architecture": "Start With What Hurts",
  "Friction-First Execution": "Start Hard Coast Later",
  "Rebuild Resistance": "Finish It Right",
  "Delegation Breakdown": "How to Think Like AI, So You Don't Stop Thinking At All",
  "Verification Bypass": "What Automation Erases",
  "Feedback Blindness": "Start Smaller Stay Standing",
  "Contextual Amnesia": "The Cost of Rushing"
};

/* Cover images (your GitHub-hosted URLs) */
const BOOK_IMG = {
  "Fix the Flow":"https://JPero85.github.io/joe-quiz/fix-the-flow.jpg",
  "The Cost You Didn't Count":"https://JPero85.github.io/joe-quiz/the-cost-you-didnt-count.jpg",
  "Polished Outside Broken Inside":"https://JPero85.github.io/joe-quiz/polished-outside-broken-inside.jpg",
  "Start With What Hurts":"https://JPero85.github.io/joe-quiz/start-with-what-hurts.jpg",
  "Start Hard Coast Later":"https://JPero85.github.io/joe-quiz/start-hard-coast-later.jpg",
  "Finish It Right":"https://JPero85.github.io/joe-quiz/finish-it-right.jpg",
  "How to Think Like AI, So You Don't Stop Thinking At All":"https://JPero85.github.io/joe-quiz/how-to-think-with-ai-so-you-dont-stop-thinking-at-all.jpg",
  "What Automation Erases":"https://JPero85.github.io/joe-quiz/what-automation-erases.jpg",
  "Start Smaller Stay Standing":"https://JPero85.github.io/joe-quiz/start-smaller-stay-standing.jpg",
  "The Cost of Rushing":"https://JPero85.github.io/joe-quiz/the-cost-of-rushing.jpg"
};

/* Buy links ‚Äî replace '#' with real product pages when ready */
const BOOK_LINK = {
  "Fix the Flow":"#",
  "The Cost You Didn't Count":"#",
  "Polished Outside Broken Inside":"#",
  "Start With What Hurts":"#",
  "Start Hard Coast Later":"#",
  "Finish It Right":"#",
  "How to Think Like AI, So You Don't Stop Thinking At All":"#",
  "What Automation Erases":"#",
  "Start Smaller Stay Standing":"#",
  "The Cost of Rushing":"#"
};

/* ---------- Render questions (guaranteed 12) ---------- */
function renderQuestions(){
  const host=document.getElementById("questions");
  host.innerHTML="";
  QUESTIONS.forEach((item,idx)=>{
    const i=idx+1;
    const div=document.createElement("div");
    div.className="quiz-question";
    div.dataset.primary=item.p; div.dataset.secondary=item.s; div.dataset.tertiary=item.t;
    div.innerHTML=`
      <p class="q">${item.q}</p>
      <div class="choices">
        <label><input type="radio" name="q${i}" value="yes"> Yes</label>
        <label><input type="radio" name="q${i}" value="no"> No</label>
      </div>`;
    host.appendChild(div);
  });
}

/* ---------- Helpers ---------- */
function allAnswered(){
  let ok=true;
  document.querySelectorAll(".quiz-question").forEach(q=>{
    if(!q.querySelector("input:checked")) ok=false;
  });
  return ok;
}

function scoreAndPick(){
  const scores={};
  document.querySelectorAll(".quiz-question").forEach(q=>{
    const sel=q.querySelector("input:checked");
    if(sel && sel.value==="yes"){
      const p=q.dataset.primary, s=q.dataset.secondary, t=q.dataset.tertiary;
      scores[p]=(scores[p]||0)+4;
      scores[s]=(scores[s]||0)+2;
      scores[t]=(scores[t]||0)+1;
    }
  });
  Object.keys(CATEGORY_TO_BOOK).forEach(cat=>{ if(!(cat in scores)) scores[cat]=0; });

  const ranked=Object.keys(CATEGORY_TO_BOOK).sort(
    (a,b)=> (scores[b]-scores[a]) || a.localeCompare(b)
  );
  const primaryCat=ranked[0];
  const secondaryCat=ranked.find(c=>c!==primaryCat) || ranked[1];

  return [CATEGORY_TO_BOOK[primaryCat], CATEGORY_TO_BOOK[secondaryCat]];
}

/* ---------- Init ---------- */
document.addEventListener("DOMContentLoaded",()=>{
  renderQuestions();

  const form=document.getElementById("quiz-form");
  const results=document.getElementById("results");
  const err=document.getElementById("error-msg");

  form.addEventListener("submit",(e)=>{
    e.preventDefault();
    err.style.display="none";
    if(!allAnswered()){ err.style.display="block"; return; }

    const [pBook, sBook]=scoreAndPick();

    // Primary card
    document.getElementById("primary-book-title").textContent=pBook;
    document.getElementById("primary-book-image").src=BOOK_IMG[pBook] || "";
    document.getElementById("primary-buy-btn").href=BOOK_LINK[pBook] || "#";

    // Secondary card
    document.getElementById("secondary-book-title").textContent=sBook;
    document.getElementById("secondary-book-image").src=BOOK_IMG[sBook] || "";
    document.getElementById("secondary-buy-btn").href=BOOK_LINK[sBook] || "#";

    // Show results
    form.style.display="none";
    results.style.display="grid";
    window.scrollTo({ top: 0, behavior: "smooth" });
  });

  document.getElementById("retake").addEventListener("click",()=>{
    form.reset();
    results.style.display="none";
    form.style.display="block";
    window.scrollTo({ top: 0, behavior: "smooth" });
  });
});
</script>
</body>
</html>
