<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Which Stuck Are You? ‚Ä¢ Quiz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css.style.css" />
</head>
<body>
  <main class="container">
    <!-- HEADER / INTRO -->
    <header class="header">
      <h1 class="title">üß≠ Start Here!</h1>
      <p class="subtitle">This quiz is designed to help surface where friction is showing up in your system, even if it's not obvious yet.</p>
      <p class="subtitle">For each statement below, choose the answer that best reflects your current experience.</p>
      <p class="subtitle">There are no wrong answers, just honest signals.</p>
      <ul class="intro-list" style="margin:8px 0 0 0; padding-left:1.2rem;">
        <li>üëç <strong>"Yes, this is true for me"</strong> means the statement resonates or regularly shows up in your work.</li>
        <li>üëé <strong>"No, this doesn't reflect my experience"</strong> means it's not something you currently deal with.</li>
      </ul>
      <p class="subtitle" style="margin-top:8px;">You'll get a tailored recommendation based on your unique pattern of friction.</p>
    </header>

    <!-- QUIZ -->
    <form id="quiz-form" class="card">
      <!-- data-primary=4pts, data-secondary=2pts, data-tertiary=1pt -->

      <div class="quiz-question" data-question="1"
           data-primary="Clarity Collapse" data-secondary="Contextual Amnesia" data-tertiary="Avoidance Architecture">
        <p class="q">1) I often sit down to work and can‚Äôt tell what actually matters.</p>
        <div class="choices">
          <label><input type="radio" name="q1" value="yes" required> Yes</label>
          <label><input type="radio" name="q1" value="no"> No</label>
        </div>
      </div>

      <div class="quiz-question" data-question="2"
           data-primary="Systemic Overload" data-secondary="Trust Erosion" data-tertiary="Pacing Drift">
        <p class="q">2) I move through tasks all day but rarely feel real progress.</p>
        <div class="choices">
          <label><input type="radio" name="q2" value="yes" required> Yes</label>
          <label><input type="radio" name="q2" value="no"> No</label>
        </div>
      </div>

      <div class="quiz-question" data-question="3"
           data-primary="Role Drift" data-secondary="Delegation Breakdown" data-tertiary="Clarity Collapse">
        <p class="q">3) I get my work done, but it feels misaligned with who I am or what I value.</p>
        <div class="choices">
          <label><input type="radio" name="q3" value="yes" required> Yes</label>
          <label><input type="radio" name="q3" value="no"> No</label>
        </div>
      </div>

      <div class="quiz-question" data-question="4"
           data-primary="Avoidance Architecture" data-secondary="Friction-First Execution" data-tertiary="Rebuild Resistance">
        <p class="q">4) I procrastinate on high-value tasks, even when they matter deeply to me.</p>
        <div class="choices">
          <label><input type="radio" name="q4" value="yes" required> Yes</label>
          <label><input type="radio" name="q4" value="no"> No</label>
        </div>
      </div>

      <div class="quiz-question" data-question="5"
           data-primary="Friction-First Execution" data-secondary="Pacing Drift" data-tertiary="Systemic Overload">
        <p class="q">5) I delay important work until the last minute, then sprint and burn out.</p>
        <div class="choices">
          <label><input type="radio" name="q5" value="yes" required> Yes</label>
          <label><input type="radio" name="q5" value="no"> No</label>
        </div>
      </div>

      <div class="quiz-question" data-question="6"
           data-primary="Rebuild Resistance" data-secondary="Trust Erosion" data-tertiary="Avoidance Architecture">
        <p class="q">6) I‚Äôve tried rebuilding my systems before ‚Äî they never seem to stick.</p>
        <div class="choices">
          <label><input type="radio" name="q6" value="yes" required> Yes</label>
          <label><input type="radio" name="q6" value="no"> No</label>
        </div>
      </div>

      <div class="quiz-question" data-question="7"
           data-primary="Delegation Breakdown" data-secondary="Verification Bypass" data-tertiary="Feedback Blindness">
        <p class="q">7) I avoid delegating because I‚Äôm unsure others will meet the mark.</p>
        <div class="choices">
          <label><input type="radio" name="q7" value="yes" required> Yes</label>
          <label><input type="radio" name="q7" value="no"> No</label>
        </div>
      </div>

      <div class="quiz-question" data-question="8"
           data-primary="Verification Bypass" data-secondary="Clarity Collapse" data-tertiary="Contextual Amnesia">
        <p class="q">8) I often feel unsure whether an outcome is still aligned with intent.</p>
        <div class="choices">
          <label><input type="radio" name="q8" value="yes" required> Yes</label>
          <label><input type="radio" name="q8" value="no"> No</label>
        </div>
      </div>

      <div class="quiz-question" data-question="9"
           data-primary="Feedback Blindness" data-secondary="Trust Erosion" data-tertiary="Verification Bypass">
        <p class="q">9) My team or system moves smoothly but I rarely hear disagreement or resistance.</p>
        <div class="choices">
          <label><input type="radio" name="q9" value="yes" required> Yes</label>
          <label><input type="radio" name="q9" value="no"> No</label>
        </div>
      </div>

      <div class="quiz-question" data-question="10"
           data-primary="Contextual Amnesia" data-secondary="Pacing Drift" data-tertiary="Rebuild Resistance">
        <p class="q">10) I can‚Äôt remember why some decisions were made ‚Äî we just keep moving.</p>
        <div class="choices">
          <label><input type="radio" name="q10" value="yes" required> Yes</label>
          <label><input type="radio" name="q10" value="no"> No</label>
        </div>
      </div>

      <div class="quiz-question" data-question="11"
           data-primary="Trust Erosion" data-secondary="Verification Bypass" data-tertiary="Delegation Breakdown">
        <p class="q">11) I often wonder if I can still trust the outputs our systems rely on.</p>
        <div class="choices">
          <label><input type="radio" name="q11" value="yes" required> Yes</label>
          <label><input type="radio" name="q11" value="no"> No</label>
        </div>
      </div>

      <div class="quiz-question" data-question="12"
           data-primary="Pacing Drift" data-secondary="Systemic Overload" data-tertiary="Clarity Collapse">
        <p class="q">12) Things are moving fast ‚Äî but I‚Äôm not sure they‚Äôre moving in the right direction.</p>
        <div class="choices">
          <label><input type="radio" name="q12" value="yes" required> Yes</label>
          <label><input type="radio" name="q12" value="no"> No</label>
        </div>
      </div>

      <div class="actions">
        <button type="submit" class="btn btn-primary">See My Book Recommendations</button>
        <div class="error" id="error-msg" role="alert" aria-live="polite">Please answer all 12 questions.</div>
      </div>
    </form>

    <!-- RESULTS (hidden until submit) -->
    <section id="results" class="grid" style="display:none;">
      <article class="card">
        <h2 class="card-title" id="primary-book-title">Primary Recommendation</h2>
        <img id="primary-book-image" alt="" class="cover">
      </article>

      <article class="card" id="secondary-card" style="display:none;">
        <h2 class="card-title" id="secondary-book-title">Secondary Recommendation</h2>
        <img id="secondary-book-image" alt="" class="cover">
      </article>

      <div class="actions" style="margin-top:8px;">
        <button id="retake" class="btn">Retake Quiz</button>
      </div>
    </section>
  </main>

  <script>
  document.addEventListener("DOMContentLoaded", function () {
    // Category -> Book
    const categoryToBook = {
      "Clarity Collapse": "Fix the Flow",
      "Systemic Overload": "The Cost You Didn't Count",
      "Role Drift": "Polished Outside Broken Inside",
      "Avoidance Architecture": "Start With What Hurts",
      "Friction-First Execution": "Start Hard Coast Later",
      "Rebuild Resistance": "Finish It Right",
      "Delegation Breakdown": "How to Think Like AI, So You Don't Stop Thinking At All",
      "Verification Bypass": "What Automation Erases",
      "Feedback Blindness": "Start Smaller Stay Standing",
      "Contextual Amnesia": "The Cost of Rushing",
      // Future expansion (no books yet):
      "Trust Erosion": "",
      "Pacing Drift": ""
    };

    // Book cover images (live URLs)
    const bookImages = {
      "Fix the Flow": "https://JPero85.github.io/joe-quiz/fix-the-flow.jpg",
      "The Cost You Didn't Count": "https://JPero85.github.io/joe-quiz/the-cost-you-didnt-count.jpg",
      "Polished Outside Broken Inside": "https://JPero85.github.io/joe-quiz/polished-outside-broken-inside.jpg",
      "Start With What Hurts": "https://JPero85.github.io/joe-quiz/start-with-what-hurts.jpg",
      "Start Hard Coast Later": "https://JPero85.github.io/joe-quiz/start-hard-coast-later.jpg",
      "Finish It Right": "https://JPero85.github.io/joe-quiz/finish-it-right.jpg",
      "How to Think Like AI, So You Don't Stop Thinking At All": "https://JPero85.github.io/joe-quiz/how-to-think-with-ai-so-you-dont-stop-thinking-at-all.jpg",
      "What Automation Erases": "https://JPero85.github.io/joe-quiz/what-automation-erases.jpg",
      "Start Smaller Stay Standing": "https://JPero85.github.io/joe-quiz/start-smaller-stay-standing-(2).jpg",
      "The Cost of Rushing": "https://JPero85.github.io/joe-quiz/the-cost-of-rushing.jpg"
    };

    const form = document.getElementById("quiz-form");
    const results = document.getElementById("results");

    form.addEventListener("submit", function (e) {
      e.preventDefault();

      const errorEl = document.getElementById("error-msg");
      errorEl.style.display = "none";

      // Ensure all answered
      let allAnswered = true;
      document.querySelectorAll(".quiz-question").forEach(q => {
        if (!q.querySelector("input[type='radio']:checked")) allAnswered = false;
      });
      if (!allAnswered) { errorEl.style.display = "block"; return; }

      // --- Score calculation ---
      const scores = {};
      document.querySelectorAll(".quiz-question").forEach(q => {
        const sel = q.querySelector("input[type='radio']:checked");
        if (sel && sel.value === "yes") {
          const p = q.dataset.primary, s = q.dataset.secondary, t = q.dataset.tertiary;
          scores[p] = (scores[p] || 0) + 4;
          scores[s] = (scores[s] || 0) + 2;
          scores[t] = (scores[t] || 0) + 1;
        }
      });

      // --- Ranking ---
      const ranked = Object.entries(scores)
        .sort((a,b) => b[1]-a[1] || a[0].localeCompare(b[0]))
        .map(([k]) => k);

      const primaryStack = ranked.slice(0,3);
      const secondaryStack = ranked.filter(c => !primaryStack.includes(c)).slice(0,3);

      // --- Primary & Secondary Book Selection ---
      const pBook = categoryToBook[primaryStack[0]] || "No Match";

      // Helper to find the first valid mapped book from a stack
      function firstMappedBookFrom(stack, map) {
        for (const cat of stack) {
          const book = map[cat];
          if (book && book.trim()) return book;
        }
        return "";
      }
      const sBook = firstMappedBookFrom(secondaryStack, categoryToBook);

      // --- Image URLs ---
      const pImg = pBook ? (bookImages[pBook] || "") : "";
      const sImg = sBook ? (bookImages[sBook] || "") : "";

      // --- Render Primary ---
      document.getElementById("primary-book-title").textContent = pBook || "No Match";
      const pImgEl = document.getElementById("primary-book-image");
      if (pImg) { pImgEl.src = pImg; pImgEl.alt = pBook; }
      else { pImgEl.removeAttribute("src"); pImgEl.alt = ""; }

      // --- Render Secondary (show only if mapped) ---
      const secondaryCard = document.getElementById("secondary-card");
      if (sBook) {
        secondaryCard.style.display = "block";
        document.getElementById("secondary-book-title").textContent = sBook;
        const sImgEl = document.getElementById("secondary-book-image");
        if (sImg) { sImgEl.src = sImg; sImgEl.alt = sBook; }
        else { sImgEl.removeAttribute("src"); sImgEl.alt = ""; }
      } else {
        secondaryCard.style.display = "none";
      }

      // Swap views
      form.style.display = "none";
      results.style.display = "grid";
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    // Retake
    document.getElementById("retake").addEventListener("click", () => {
      form.reset();
      results.style.display = "none";
      form.style.display = "block";
      window.scrollTo({ top: 0, behavior: "smooth" });
    });
  });
  </script>
</body>
</html>
